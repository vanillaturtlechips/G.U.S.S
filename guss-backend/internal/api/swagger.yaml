openapi: 3.0.0
info:
  title: G.U.S.S (Gym User Support Service) API
  description: 실시간 헬스장 혼잡도 확인 및 예약 시스템 API 문서
  version: 1.0.0

servers:
  - url: http://localhost:9000/api
    description: 로컬 개발 서버

components:
  securitySchemes:
    bearerAuth:            # JWT 인증 설정
      type: http
      scheme: bearer
      bearerFormat: JWT

  schemas:
    User:                  # 사용자 모델
      type: object
      properties:
        user_name: { type: string, example: "홍길동" }
        user_phone: { type: string, example: "010-1234-5678" }
        user_id: { type: string, example: "user123" }
        user_pw: { type: string, format: password }

    Gym:                   # 체육관 모델
      type: object
      properties:
        guss_number: { type: integer }
        guss_name: { type: string, example: "GUSS 피트니스 강남점" }
        guss_status: { type: string, enum: [open, close] }
        guss_user_count: { type: integer, example: 25 }
        guss_size: { type: integer, example: 50 }

paths:
  /register:
    post:
      summary: 회원가입
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/User'
      responses:
        '201':
          description: 가입 성공

  /login:
    post:
      summary: 로그인
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                user_id: { type: string }
                user_pw: { type: string }
      responses:
        '200':
          description: 로그인 성공 (토큰 반환)

  /gyms:
    get:
      summary: 헬스장 목록 조회 (지도 마커용)
      responses:
        '200':
          description: 전체 체육관 리스트 반환
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Gym'

  /gyms/{id}:
    get:
      summary: 상세 정보 및 혼잡도 조회
      parameters:
        - name: id
          in: path
          required: true
          schema: { type: integer }
      responses:
        '200':
          description: 체육관 상세 및 실시간 혼잡도 반환

  /reserve:
    post:
      summary: 이용 예약
      security:
        - bearerAuth: []
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                guss_number: { type: integer }
      responses:
        '201':
          description: 예약 완료
        '401':
          description: 인증 실패 (로그인 필요)

  /admin/logs:
    get:
      summary: 관리자 로그 조회 (매출/예약 현황)
      security:
        - bearerAuth: []
      responses:
        '200':
          description: 관리자용 로그 데이터 반환